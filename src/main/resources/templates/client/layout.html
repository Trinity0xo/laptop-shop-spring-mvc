<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">ShopLap</title>
    <meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
    <meta
      id="_csrf_header"
      name="_csrf_header"
      th:content="${_csrf.headerName}"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.css"
      integrity="sha512-wJgJNTBBkLit7ymC6vvzM1EcSWeM9mmOu+1USHaRBbHkm6W9EgM0HY27+UtUaprntaYQJF75rc8gjxllKs5OIQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
      integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
      integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/share.css" />
    <link rel="stylesheet" href="/css/client/layout.css" />
    <link rel="stylesheet" href="/css/client/home.css" />
    <link rel="stylesheet" href="/css/client/shop.css" />
    <link rel="stylesheet" href="/css/client/cart.css" />
    <link rel="stylesheet" href="/css/client/account_info.css" />
    <link rel="stylesheet" href="/css/client/account_aside.css" />
    <link rel="stylesheet" href="/css/client/order_history.css" />
    <link rel="stylesheet" href="/css/client/order_details.css" />
    <link rel="stylesheet" href="/css/client/cancel_order.css" />
    <link rel="stylesheet" href="/css/client/checkout.css" />
    <link rel="stylesheet" href="/css/client/product_details.css" />
    <link rel="stylesheet" href="/css/client/top_selling.css" />
    <link rel="stylesheet" href="/css/client/top_rating.css" />
    <link rel="stylesheet" href="/css/client/top_discount.css" />
    <link rel="stylesheet" href="/css/client/product_reviews.css" />
    <link rel="stylesheet" href="/css/client/update_account_info.css" />
    <link rel="stylesheet" href="/css/client/product_reviews.css" />
  </head>

  <body>
    <!-- header -->
    <header>
      <!-- container -->
      <div class="container">
        <!-- header top -->
        <div class="header-top">
          <div class="log">
            <a class="site-logo" href="/">SHOPLAP</a>
          </div>
        </div>

        <!-- divider -->
        <div class="divider"></div>

        <!-- header bottom -->
        <nav class="header-bottom">
          <button type="button" id="btnShowSideBar" class="show-sidebar-button">
            <i class="fa-solid fa-bars"></i>
          </button>

          <!-- mobile nav active -->
          <div class="nav-actions mobile">
            <!-- cart icon -->
            <a
              class="cart-icon"
              href="/cart"
              th:if="${#authorization.expression('isAuthenticated()')}"
            >
              <i class="fa-solid fa-bag-shopping"></i>
              <div class="cart-count">
                <p
                  class="cart-count-number warning-badge"
                  th:text="${authenticatedInformation.cartItemCount}"
                ></p>
              </div>
            </a>

            <!-- authentication button -->
            <button
              type="button"
              id="btnShowAuthenticationLinks"
              class="show-authentication-links-button"
              th:if="${not #authorization.expression('isAuthenticated()')}"
            >
              <i class="fa-solid fa-user"></i>
            </button>

            <!-- account button -->
            <button
              type="button"
              id="btnShowAccountLinks"
              class="show-account-links-button"
              th:if="${#authorization.expression('isAuthenticated()')}"
            >
              <img
                th:if="${authenticatedInformation.avatar == null or authenticatedInformation.avatar.isEmpty()}"
                src="/images/default-avatar.png"
                alt="avatar"
              />

              <img
                th:if="${authenticatedInformation.avatar != null and not authenticatedInformation.avatar.isEmpty()}"
                th:src="${'/' + resourcesMappingFolder + '/' + avatarsFolder + '/' + authenticatedInformation.avatar}"
                alt="avatar"
              />
            </button>
          </div>

          <!-- nav menu -->
          <div
            class="nav-menu"
            th:with="queryUtils=${T(com.laptopstore.ecommerce.util.QueryUtils)}"
          >
            <a
              th:with="newUrl=${queryUtils.modifiedQuery('/hot-deals', {{'sortBy': 'discount', 'sortDirection': 'DESC'}})}"
              th:href="${newUrl}"
              class="hot-deals-button primary-button"
            >
              <i class="fa-solid fa-percent"></i>
              Ưu đãi hot
            </a>
            <ul class="nav-menu-list">
              <li class="item">
                <a class="link home-link" href="/">Trang chủ</a>
              </li>
              <li class="item">
                <a class="link shop-link" href="/shop">Cửa hàng</a>
              </li>
              <li class="item">
                <a class="link about-link" href="/about">Giới thiệu</a>
              </li>
              <li class="item">
                <a class="link contact-link" href="/contact">Liên hệ</a>
              </li>
            </ul>
          </div>

          <!-- desktop nav action -->
          <div class="nav-actions">
            <!-- show search modal button -->
            <button
              type="button"
              class="show-search-modal-button primary-button show-modal-button"
              data-show="searchModal"
            >
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>

            <!-- search form -->
            <form class="search-form search" method="get" th:action="@{/shop}">
              <input
                type="text"
                class="search-input"
                name="search"
                placeholder="Tìm kiếm..."
                required
              />
              <button type="submit" class="search-button">
                <i class="fa-solid fa-magnifying-glass"></i>
              </button>
            </form>

            <!-- cart icon -->
            <a
              class="cart-icon"
              href="/cart"
              th:if="${#authorization.expression('isAuthenticated()')}"
            >
              <i class="fa-solid fa-bag-shopping"></i>
              <div class="cart-count">
                <p
                  class="cart-count-number warning-badge"
                  th:text="${authenticatedInformation.cartItemCount}"
                ></p>
              </div>
            </a>

            <!-- authentication dropdown -->
            <div
              class="authentication-dropdown dropdown"
              th:if="${not #authorization.expression('isAuthenticated()')}"
            >
              <button
                type="button"
                class="authentication-dropdown-toggle dropdown-toggle"
              >
                <i class="fa-solid fa-user"></i>
              </button>
              <ul class="authentication-dropdown-menu dropdown-menu">
                <li class="authentication-dropdown-item dropdown-item">
                  <a class="link login-link" th:href="@{/auth/login}"
                    >Đăng nhập</a
                  >
                </li>
                <li class="authentication-dropdown-item dropdown-item">
                  <a class="link register-link" th:href="@{/auth/register}"
                    >Đăng ký</a
                  >
                </li>
              </ul>
            </div>

            <!-- account dropdown -->
            <div
              class="account-dropdown dropdown"
              th:if="${#authorization.expression('isAuthenticated()')}"
            >
              <button
                type="button"
                class="account-dropdown-toggle dropdown-toggle"
              >
                <img
                  class="account-avatar"
                  th:if="${authenticatedInformation.avatar == null or authenticatedInformation.avatar.isEmpty()}"
                  src="/images/default-avatar.png"
                  alt="avatar"
                />

                <img
                  class="account-avatar"
                  th:if="${authenticatedInformation.avatar != null and not authenticatedInformation.avatar.isEmpty()}"
                  th:src="${'/' + resourcesMappingFolder + '/' + avatarsFolder + '/' + authenticatedInformation.avatar}"
                  alt="avatar"
                />
              </button>
              <ul class="account-dropdown-menu dropdown-menu">
                <li class="account-dropdown-item dropdown-item">
                  <div class="account-information">
                    <p
                      class="account-name"
                      th:text="${authenticatedInformation.fullName}"
                    ></p>
                    <p
                      class="account-email"
                      th:text="${authenticatedInformation.email}"
                    ></p>
                  </div>
                </li>
                <li class="account-dropdown-item dropdown-item">
                  <a
                    class="link account-information-link"
                    href="/account/information"
                    >Tài khoản của tôi</a
                  >
                </li>
                <li class="account-dropdown-item dropdown-item">
                  <a
                    class="link order-history-link"
                    href="/account/order-history"
                    >Lịch sử đơn hàng</a
                  >
                </li>
                <li class="account-dropdown-item dropdown-item">
                  <form
                    class="logout-form"
                    method="post"
                    th:action="@{/logout}"
                  >
                    <button class="link logout" type="submit">Đăng xuất</button>
                  </form>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <!-- overlay -->
    <div class="overlay"></div>

    <!-- sidebar -->
    <div class="sidebar">
      <!-- sidebar header -->
      <div class="sidebar-header">
        <!-- top -->
        <div class="top">
          <button type="button" id="btnHideSideBar" class="hide-sidebar-button">
            <i class="fa-solid fa-bars"></i>
          </button>
          <div class="logo">
            <a href="/" class="site-logo">SHOPLAP</a>
          </div>
        </div>

        <!-- account -->
        <div
          class="account"
          th:if="${#authorization.expression('isAuthenticated()')}"
        >
          <div class="account-avatar">
            <img
              th:if="${session.avatar == null or session.avatar.isEmpty()}"
              src="/images/default-avatar.png"
              alt="avatar"
            />
            <img
              th:if="${session.avatar != null and not session.avatar.isEmpty()}"
              th:src="${'/' + resourcesMappingFolder + '/' + avatarsFolder + '/' + session.avatar}"
              alt="avatar"
            />
          </div>
          <div class="account-information">
            <p class="name" th:text="${session.fullName}"></p>
            <p class="email" th:text="${session.username}"></p>
          </div>
        </div>

        <!-- search form -->
        <form class="search-form search" method="get" th:action="@{/shop}">
          <input
            type="text"
            name="search"
            class="search-input"
            placeholder="Tìm kiếm..."
            required
          />
          <button type="button" class="search-button">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
      </div>

      <!-- sidebar body -->
      <div class="sidebar-body">
        <!-- account links -->
        <ul
          class="account-link-list"
          th:if="${#authorization.expression('isAuthenticated()')}"
        >
          <li class="account-link-item">
            <a class="link account-information-link" href="/account/information"
              ><i class="fa-solid fa-user"></i>Tài khoản của tôi</a
            >
          </li>
          <li class="account-link-item">
            <a class="link order-history-link" href="/account/order-history"
              ><i class="fas fa-history"></i>Lịch sử đơn hàng</a
            >
          </li>
        </ul>

        <!-- authentication links -->
        <ul
          class="authentication-link-list"
          th:if="${not #authorization.expression('isAuthenticated()')}"
        >
          <li class="authentication-link-item">
            <a class="link login-link" th:href="@{/auth/login}"
              ><i class="fas fa-sign-in-alt"></i> Đăng nhập</a
            >
          </li>
          <li class="authentication-link-item">
            <a class="link register-link" th:href="@{/auth/register}"
              ><i class="fa-solid fa-user-plus"></i>Đăng ký</a
            >
          </li>
        </ul>

        <!-- nav menu -->
        <ul class="nav-menu-list">
          <li class="item">
            <a class="link home-link" href="/"
              ><i class="fa-solid fa-house"></i>Trang chủ</a
            >
          </li>
          <li class="item">
            <a class="link shop-link" href="/shop"
              ><i class="fa-solid fa-cart-shopping"></i>Shop</a
            >
          </li>
          <li class="item">
            <a class="link about-link" href="#"
              ><i class="fa-solid fa-circle-exclamation"></i>Giới thiệu</a
            >
          </li>
          <li class="item">
            <a class="link contact-link" href="#"
              ><i class="fa-solid fa-phone"></i>Liên hệ</a
            >
          </li>
        </ul>
      </div>

      <!-- sidebar footer -->
      <div class="sidebar-footer">
        <form
          class="logout-form"
          method="post"
          th:action="@{/logout}"
          th:if="${#authorization.expression('isAuthenticated()')}"
        >
          <button class="logout-button danger-button" type="submit">
            Đăng xuất
          </button>
        </form>
      </div>
    </div>

    <!-- search modal -->
    <div id="searchModal" class="search-modal modal">
      <div class="modal-header">
        <div class="header-title">Tìm kiếm</div>
        <button type="button" class="hide-modal-button" data-hide="searchModal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div class="search-modal-body modal-body">
        <form class="search-form search" method="get" th:action="@{/shop}">
          <input
            type="text"
            name="search"
            class="search-input"
            placeholder="Nhập từ khóa tìm kiếm..."
            required
          />
          <button type="submit" class="search-button">
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>
        </form>
      </div>
    </div>

    <!-- messages -->
    <div class="messages" style="display: none">
      <p
        class="message success-message"
        th:if="${successMessage != null and !successMessage.isEmpty()}"
        th:text="${successMessage}"
      ></p>
      <p
        class="message error-message"
        th:if="${errorMessage != null and !errorMessage.isEmpty()}"
        th:text="${errorMessage}"
      ></p>
    </div>

    <!-- main -->
    <div layout:fragment="content"></div>

    <!-- footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
            <!-- about -->
            <div class="about">
              <h4 class="about-title">Giới thiệu</h4>
              <p class="about-description">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Eveniet
                magnam mollitia, itaque ullam debitis deleniti voluptatibus
                corrupti similique harum magni animi, praesentium eius numquam
                consequuntur officia fuga quam incidunt? Rem.
              </p>
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 col-xl-3">
            <!-- support -->
            <div class="support">
              <h4 class="support-title">Hỗ trợ</h4>
              <ul class="support-link-list">
                <li class="support-link-item">
                  <a
                    class="link order-history-link"
                    href="/account/order-history"
                    >Theo dõi đơn hàng</a
                  >
                </li>
                <li class="support-link-item">
                  <a class="link cart-link" href="/cart">Xem giỏ hàng</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 col-md-6 col-lg-3 col-xl-3">
            <!-- contact -->
            <div class="contact">
              <h4 class="contact-title">Liên hệ</h4>
              <ul class="contact-info-list">
                <li class="item">
                  <p class="text address">
                    <i class="fa-solid fa-location-dot"></i>Plaza X, Tầng XY,
                    Đường XYZ, XYZ
                  </p>
                </li>
                <li class="item">
                  <p class="text email">
                    <i class="fa-solid fa-envelope"></i>example@gmail.com
                  </p>
                </li>
                <li class="item">
                  <p class="text phone">
                    <i class="fa-solid fa-phone"></i>0123456789
                  </p>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <!-- copyright -->
        <div class="copyright">
          <p class="text">
            Copyright &copy; 2025 ShopLap. Design by
            <a class="link" href="#">Trinity0xo</a> All rights reserved
          </p>
        </div>
      </div>
    </footer>
  </body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.js"
    integrity="sha512-zlWWyZq71UMApAjih4WkaRpikgY9Bz1oXIW5G0fED4vk14JjGlQ1UmkGM392jEULP8jbNMiwLWdM8Z87Hu88Fw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
    integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script type="module" src="/js/client/main.js"></script>
  <script layout:fragment="scripts"></script>
</html>
