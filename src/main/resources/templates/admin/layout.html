<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">ShopLap</title>
    <meta id="_csrf" name="_csrf" th:content="${_csrf.token}" />
    <meta
      id="_csrf_header"
      name="_csrf_header"
      th:content="${_csrf.headerName}"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.css"
      integrity="sha512-wJgJNTBBkLit7ymC6vvzM1EcSWeM9mmOu+1USHaRBbHkm6W9EgM0HY27+UtUaprntaYQJF75rc8gjxllKs5OIQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
      integrity="sha512-tS3S5qG0BlhnQROyJXvNjeEM4UpMXHrQfTGmbQ1gKmelCxlSEBUaxhRBj/EFTzpbP4RVSrpEikbmdJobCvhE3g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"
      integrity="sha512-sMXtMNL1zRzolHYKEujM2AqCLUR9F2C4/05cdbxjjLSRvMQIciEPCQZo++nk7go3BtSuK9kfa/s+a4f4i5pLkw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/reset.css" />
    <link rel="stylesheet" href="/css/share.css" />
    <link rel="stylesheet" href="/css/admin/layout.css" />
    <link rel="stylesheet" href="/css/admin/dashboard.css" />
    <link rel="stylesheet" href="/css/admin/brand.css" />
    <link rel="stylesheet" href="/css/admin/category.css" />
    <link rel="stylesheet" href="/css/admin/product.css" />
    <link rel="stylesheet" href="/css/admin/order.css" />
    <link rel="stylesheet" href="/css/admin/role.css" />
    <link rel="stylesheet" href="/css/admin/user.css" />
    <link rel="stylesheet" href="/css/admin/review.css" />
  </head>
  <body>
    <div class="layout">
      <!--overlay-->
      <div class="overlay"></div>

      <!-- header -->
      <header>
        <div class="header-left">
          <!-- logo -->
          <div class="logo">
            <a href="/" class="site-logo">SHOPLAP</a>
          </div>
        </div>

        <div class="header-right">
          <!-- sidebar toggle -->
          <button
            type="button"
            class="toggle-sidebar-button"
            id="btnToggleSideBar"
          >
            <i class="fa-solid fa-bars"></i>
          </button>

          <!-- account dropdown -->
          <div class="account-dropdown dropdown">
            <button
              type="button"
              class="account-dropdown-toggle dropdown-toggle"
            >
              <img
                class="account-avatar"
                th:if="${#strings.isEmpty(authenticatedInformation.avatar)}"
                src="/images/default-avatar.png"
                alt="avatar"
              />

              <img
                class="account-avatar"
                th:if="${!#strings.isEmpty(authenticatedInformation.avatar)}"
                th:src="${'/' + resourcesMappingFolder + '/' + avatarsFolder + '/' + authenticatedInformation.avatar}"
                alt="avatar"
              />
            </button>
            <ul class="account-dropdown-menu dropdown-menu">
              <li class="account-dropdown-item dropdown-item">
                <div class="account-information">
                  <p
                    class="account-name"
                    th:text="${authenticatedInformation.fullName}"
                  ></p>
                  <p
                    class="account-email"
                    th:text="${authenticatedInformation.email}"
                  ></p>
                  <p
                    class="account-role"
                    th:text="${authenticatedInformation.roleName}"
                  ></p>
                </div>
              </li>
              <li class="account-dropdown-item dropdown-item">
                <a
                  class="link account-information-link"
                  href="/account/information"
                  >Tài khoản của tôi</a
                >
              </li>
              <li class="account-dropdown-item dropdown-item">
                <a class="link account-information-link" href="/shop"
                  >Trang cửa hàng</a
                >
              </li>
              <li class="account-dropdown-item dropdown-item">
                <form class="logout-form" method="post" th:action="@{/logout}">
                  <button class="link logout" type="submit">Đăng xuất</button>
                </form>
              </li>
            </ul>
          </div>
        </div>
      </header>

      <!-- sidebar -->
      <div class="sidebar">
        <ul class="nav-list">
          <li class="item">
            <a
              class="link"
              href="/dashboard"
              th:classappend="${currentPath == '/dashboard'} ? 'active'"
            >
              <i class="fa-solid fa-table-columns"></i>Dashboard
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/statistics"
              th:classappend="${currentPath.contains('/statistics')} ? 'active'"
            >
              <i class="fa-solid fa-chart-line"></i>Thống kê
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/top-selling"
              th:classappend="${currentPath.contains('/top-selling')} ? 'active'"
            >
              <i class="fas fa-trophy"></i>Bán chạy
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/top-rated"
              th:classappend="${currentPath.contains('/top-rated')} ? 'active'"
            >
              <i class="fas fa-star"></i>Đánh giá cao
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/review"
              th:classappend="${currentPath == '/review'} ? 'active'"
            >
              <i class="fas fa-pen"></i>Đánh giá
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/order"
              th:classappend="${currentPath.contains('/order')} ? 'active'"
            >
              <i class="fa-solid fa-cart-shopping"></i>Đơn hàng
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/product"
              th:classappend="${currentPath.contains('/product')} ? 'active'"
            >
              <i class="fa-solid fa-cubes"></i>Sản phẩm
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/brand"
              th:classappend="${currentPath.contains('/brand')} ? 'active'"
            >
              <i class="fa-solid fa-copyright"></i>Thương hiệu
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/category"
              th:classappend="${currentPath.contains('/category')} ? 'active'"
            >
              <i class="fa-solid fa-layer-group"></i>Danh mục
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/user"
              th:classappend="${currentPath.contains('/user')} ? 'active'"
            >
              <i class="fa-solid fa-users"></i>Người dùng
            </a>
          </li>

          <li class="item">
            <a
              class="link"
              href="/dashboard/role"
              th:classappend="${currentPath.contains('/role')} ? 'active'"
            >
              <i class="fa-solid fa-user-plus"></i>Vai trò
            </a>
          </li>
        </ul>
      </div>

      <!-- messages -->
      <div class="messages" style="display: none">
        <p
          class="message success-message"
          th:if="${successMessage != null and !successMessage.isEmpty()}"
          th:text="${successMessage}"
        ></p>
      </div>

      <!-- main -->
      <div class="main">
        <!-- content -->
        <div class="content" layout:fragment="content"></div>

        <!-- footer -->
        <footer>
          <div class="container-fluid">
            <!-- copyright -->
            <div class="copyright">
              <p class="text">
                &copy; 2025 ShopLap. Design by
                <a class="link" href="#">Trinity0xo</a>
              </p>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </body>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.js"
    integrity="sha512-zlWWyZq71UMApAjih4WkaRpikgY9Bz1oXIW5G0fED4vk14JjGlQ1UmkGM392jEULP8jbNMiwLWdM8Z87Hu88Fw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"
    integrity="sha512-bPs7Ae6pVvhOSiIcyUClR7/q2OAsRiovw4vAkX+zJbw3ShAeeqezq50RIIcIURq7Oa20rW2n2q+fyXBNcU9lrw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"
    integrity="sha512-CQBWl4fJHWbryGE+Pc7UAxWMUMNMWzWxF4SQo9CgkJIN1kx6djDQZjh3Y8SZ1d+6I+1zze6Z7kHXO7q3UyZAWw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  ></script>
  <script type="modue" src="/js/utils.js"></script>
  <script type="module" src="/js/main.js"></script>
  <script layout:fragment="scripts"></script>
  <script>
    // sidebar
    const sideBar = $(".sidebar");
    const btnToggleSidebar = $("#btnToggleSideBar");
    const layout = $(".layout");

    const MIN_WIDTH = 1200;

    // toggle sidebar
    btnToggleSidebar.click(function (e) {
      e.stopPropagation();
      if ($(window).outerWidth() >= MIN_WIDTH) {
        layout.removeClass("mobile-show");
        layout.toggleClass("desktop-hide");
      } else {
        layout.removeClass("desktop-hide");
        layout.toggleClass("mobile-show");
      }
    });

    // hide sidebar on click outside (only for mobile)
    $(document).click(function (e) {
      if (
        $(window).outerWidth() < MIN_WIDTH &&
        !sideBar.is(e.target) &&
        sideBar.has(e.target).length === 0 &&
        !btnToggleSidebar.is(e.target)
      ) {
        layout.removeClass("mobile-show");
      }
    });
  </script>
</html>
